<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1"/><script src="https://use.fontawesome.com/582265226c.js"></script><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700&amp;display=swap" rel="stylesheet"/><style data-styled="ggyfCw cIFmEy gStFwB ekbUvn gkjdIh bkJYag hQBqQK ingTeD chhkxg jpBOok hmgSya ekmHSg kVBzNx QhKwy gvDWNs" data-styled-version="4.3.2">
/* sc-component-id: NavCore__NavCoreFlex-sc-1jjng7x-0 */
.ekbUvn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;} .ekbUvn a{background-color:#8E0E34;text-align:center;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;font-size:15px;} .ekbUvn .big-a{-webkit-box-flex:2;-webkit-flex-grow:2;-ms-flex-positive:2;flex-grow:2;} .ekbUvn a:hover{background-color:#e01634;} @media only screen and (min-width:640px){.ekbUvn{width:330px;margin-right:20px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;background-color:#e01634;}.ekbUvn a{background-color:transparent;font-size:17.5px;}.ekbUvn a:hover{background-color:transparent;}}
/* sc-component-id: styles__VerticalCenter-sc-15s5x5k-0 */
.gStFwB{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}
/* sc-component-id: styles__FlexRow-sc-15s5x5k-2 */
.ingTeD{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}
/* sc-component-id: styles__Flex-sc-15s5x5k-4 */
.cIFmEy{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}
/* sc-component-id: Nav__NavStyle-sc-8cs43r-0 */
.ggyfCw{height:50px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;font-size:17.5px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;background-color:#e01634;} .ggyfCw .logo{margin-top:2px;font-size:30px;font-weight:700;width:225px;color:#fcfdff;} .ggyfCw .logo a{margin-left:20px;font-size:25px;} .ggyfCw .logo a:hover{-webkit-text-decoration:none;text-decoration:none;} .ggyfCw .justify-left{-webkit-box-pack:left !important;-webkit-justify-content:left !important;-ms-flex-pack:left !important;justify-content:left !important;} .ggyfCw a{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;} .ggyfCw a:hover{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline;} .ggyfCw i{color:#fcfdff;font-size:40px;}
/* sc-component-id: HamburgerBar__SectionTitle-ct7u3y-0 */
.hQBqQK{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-left:20px;font-size:20px;font-weight:400;}
/* sc-component-id: HamburgerBar__Hamburger-ct7u3y-1 */
.bkJYag{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-left:10px;margin-top:5px;height:100%;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;} .bkJYag #nav-icon3{width:30px;height:30px;position:relative;-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);-webkit-transition:0.5s ease-in-out;-moz-transition:0.5s ease-in-out;-o-transition:0.5s ease-in-out;-webkit-transition:0.5s ease-in-out;transition:0.5s ease-in-out;cursor:pointer;} .bkJYag span{display:block;position:absolute;height:4px;width:100%;background:#2b282b;opacity:1;left:0;-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);-webkit-transition:0.25s ease-in-out;-moz-transition:0.25s ease-in-out;-o-transition:0.25s ease-in-out;-webkit-transition:0.25s ease-in-out;transition:0.25s ease-in-out;} .bkJYag #nav-icon3 span:nth-child(1){top:0px;} .bkJYag #nav-icon3 span:nth-child(2),.bkJYag #nav-icon3 span:nth-child(3){top:9px;} .bkJYag #nav-icon3 span:nth-child(4){top:18px;} .bkJYag #nav-icon3.open span:nth-child(1){top:9px;width:0%;left:50%;} .bkJYag #nav-icon3.open span:nth-child(2){-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-o-transform:rotate(45deg);-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);} .bkJYag #nav-icon3.open span:nth-child(3){-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-o-transform:rotate(-45deg);-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);transform:rotate(-45deg);} .bkJYag #nav-icon3.open span:nth-child(4){top:9px;width:0%;left:50%;}
/* sc-component-id: HamburgerBar__HamburgerBarStyle-ct7u3y-2 */
.gkjdIh{width:100%;height:50px;background-color:#edf0f2;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;} .gkjdIh i{font-size:20px;margin-left:5px;} @media only screen and (min-width:640px){.gkjdIh{display:none;}}
/* sc-component-id: Section__SubsectionStyled-aao14i-0 */
.hmgSya{font-weight:100;font-size:15px;margin-top:3px;margin-bottom:3px;margin-left:20px;color:#2b282b;} .hmgSya:hover{color:#e01634;}
/* sc-component-id: Section__SectionStyled-aao14i-1 */
.jpBOok{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding-left:10px;padding-right:10px;} .jpBOok h1{font-size:17.5px;} .jpBOok i{font-size:23px;-webkit-transition:200ms linear;transition:200ms linear;} .jpBOok .rotate0{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);} .jpBOok .rotate90{-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}
/* sc-component-id: Sidebar__SidebarStyled-k4u00n-0 */
.chhkxg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100vh;width:100%;font-size:7.5px;font-weight:400;color:#2b282b;background-color:#fcfdff;} .chhkxg:hover{cursor:pointer;} @media only screen and (min-width:640px){.chhkxg{width:25%;max-width:250px;}}
/* sc-component-id: Footer__FooterSection-sc-1aztnwy-0 */
.QhKwy{width:100%;padding:0 10px 0 10px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;} .QhKwy h5{font-size:15px;margin:10px 0 10px 0;} .QhKwy a{font-weight:400;} @media only screen and (min-width:640px){.QhKwy{width:150px;}}
/* sc-component-id: Footer__Bumper-sc-1aztnwy-1 */
.gvDWNs{width:100%;font-size:15px;text-align:center;font-weight:100;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:0 25% 0 25%;}
/* sc-component-id: Footer__FooterStyles-sc-1aztnwy-2 */
.kVBzNx{padding:15px 0 0 0;width:100%;min-height:250px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;background-color:#2b282b;color:#fcfdff;}
/* sc-component-id: DocsLayout__MarkdownStyles-sc-1wajj7e-1 */
.ekmHSg{padding-left:20px;padding-right:20px;width:75%;} @media only screen and (min-width:640px){.ekmHSg{width:60%;}}
/* sc-component-id: sc-global-29550948 */
table{border:3px solid #000000;width:100%;text-align:left;border-collapse:collapse;} table td,table th{border:1px solid #000000;padding:5px 4px;} table tbody td{font-size:13px;} table thead{background:#CFCFCF;background:-moz-linear-gradient(top,#dbdbdb 0%,#d3d3d3 66%,#CFCFCF 100%);background:-webkit-linear-gradient(top,#dbdbdb 0%,#d3d3d3 66%,#CFCFCF 100%);background:linear-gradient(to bottom,#dbdbdb 0%,#d3d3d3 66%,#CFCFCF 100%);border-bottom:3px solid #000000;} table thead th{font-size:15px;font-weight:bold;color:#000000;text-align:left;} table tfoot{font-size:14px;font-weight:bold;color:#000000;border-top:3px solid #000000;} table tfoot td{font-size:14px;}
/* sc-component-id: sc-global-3895128562 */
{/*!
* Agate by Taufik Nurrohman <https://github.com/tovic>
* ----------------------------------------------------
*
* #ade5fc
* #a2fca2
* #c6b4f0
* #d36363
* #fcc28c
* #fc9b9b
* #ffa
* #fff
* #333
* #62c8f3
* #888
*
*/} .hljs{display:block;overflow-x:auto;padding:0.5em;background:#333;color:white;} .hljs-name,.hljs-strong{font-weight:bold;} .hljs-code,.hljs-emphasis{font-style:italic;} .hljs-tag{color:#62c8f3;} .hljs-variable,.hljs-template-variable,.hljs-selector-id,.hljs-selector-class{color:#ade5fc;} .hljs-string,.hljs-bullet{color:#a2fca2;} .hljs-type,.hljs-title,.hljs-section,.hljs-attribute,.hljs-quote,.hljs-built_in,.hljs-builtin-name{color:#ffa;} .hljs-number,.hljs-symbol,.hljs-bullet{color:#d36363;} .hljs-keyword,.hljs-selector-tag,.hljs-literal{color:#fcc28c;} .hljs-comment,.hljs-deletion,.hljs-code{color:#888;} .hljs-regexp,.hljs-link{color:#c6b4f0;} .hljs-meta{color:#fc9b9b;} .hljs-deletion{background-color:#fc9b9b;color:#333;} .hljs-addition{background-color:#a2fca2;color:#333;} .hljs a{color:inherit;} .hljs a:focus,.hljs a:hover{color:inherit;-webkit-text-decoration:underline;text-decoration:underline;}
/* sc-component-id: sc-global-819470482 */
body{width:100%;margin:0;height:100%;font-family:'Roboto',sans-serif;background-color:#fcfdff;} a{color:#fcfdff;-webkit-text-decoration:none;text-decoration:none;}</style><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/><meta charSet="utf-8"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/1ULOyhpdE60Kv59GvR_OI/pages/docs/gettingstarted/intro.js" as="script"/><link rel="preload" href="/_next/static/1ULOyhpdE60Kv59GvR_OI/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-f5e50b6b501ccea2a79b.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.dd6c635d8eadfd49a780.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-a3e70f2f58612dbba4b9.js" as="script"/></head><body><div id="__next"><section class="Nav__NavStyle-sc-8cs43r-0 ggyfCw"><div class="logo"><div class="styles__Flex-sc-15s5x5k-4 cIFmEy"><div class="styles__VerticalCenter-sc-15s5x5k-0 gStFwB"><a href=""><img src="/static/assets/logo_inverted.png" width="35px" height="40px"/></a></div><div class="styles__VerticalCenter-sc-15s5x5k-0 gStFwB"><a href="/">Firecomm</a></div></div></div><div class="NavCore__NavCoreFlex-sc-1jjng7x-0 ekbUvn"><a href="/docs/gettingstarted/intro">Getting Started</a><a href="/docs/gettingstarted/intro">API</a><a href="/guides">Guides</a><a href="https://github.com/oslabs-beta/firecomm"><i class="fa fa-github"></i></a></div></section><div class="HamburgerBar__HamburgerBarStyle-ct7u3y-2 gkjdIh"><div class="HamburgerBar__Hamburger-ct7u3y-1 bkJYag"><div id="nav-icon3" class=""><span></span><span></span><span></span><span></span></div></div><div class="styles__Flex-sc-15s5x5k-4 cIFmEy"><div class="styles__VerticalCenter-sc-15s5x5k-0 gStFwB"><i class="fa fa-angle-right"></i></div><div class="HamburgerBar__SectionTitle-ct7u3y-0 hQBqQK">Getting Started</div></div></div><div class="styles__FlexRow-sc-15s5x5k-2 ingTeD"><div class="Sidebar__SidebarStyled-k4u00n-0 chhkxg"><div class="Section__SectionStyled-aao14i-1 jpBOok"><h1>Getting Started</h1><div class="styles__VerticalCenter-sc-15s5x5k-0 gStFwB"><i class="fa fa-angle-right rotate90"></i></div></div><a href="/docs/gettingstarted/intro"><h1 class="Section__SubsectionStyled-aao14i-0 hmgSya">Intro</h1></a><a href="/docs/gettingstarted/concepts"><h1 class="Section__SubsectionStyled-aao14i-0 hmgSya">Concepts</h1></a><a href="/docs/gettingstarted/codewalkthrough"><h1 class="Section__SubsectionStyled-aao14i-0 hmgSya">Code Walkthrough</h1></a><div class="Section__SectionStyled-aao14i-1 jpBOok"><h1>Core</h1><div class="styles__VerticalCenter-sc-15s5x5k-0 gStFwB"><i class="fa fa-angle-right rotate90"></i></div></div><a href="/docs/core/server"><h1 class="Section__SubsectionStyled-aao14i-0 hmgSya">Server</h1></a><a href="/docs/core/stub"><h1 class="Section__SubsectionStyled-aao14i-0 hmgSya">Stub</h1></a><a href="/docs/core/build"><h1 class="Section__SubsectionStyled-aao14i-0 hmgSya">Build</h1></a><a href="/docs/core/servercalls"><h1 class="Section__SubsectionStyled-aao14i-0 hmgSya">ServerCalls</h1></a><a href="/docs/core/stubcalls"><h1 class="Section__SubsectionStyled-aao14i-0 hmgSya">StubCalls</h1></a><div class="Section__SectionStyled-aao14i-1 jpBOok"><h1>Extensions</h1><div class="styles__VerticalCenter-sc-15s5x5k-0 gStFwB"><i class="fa fa-angle-right rotate90"></i></div></div><a href="/docs/extensions/middleware"><h1 class="Section__SubsectionStyled-aao14i-0 hmgSya">Middleware</h1></a><a href="/docs/extensions/errorhandling"><h1 class="Section__SubsectionStyled-aao14i-0 hmgSya">Error Handling</h1></a><a href="/docs/extensions/metadata"><h1 class="Section__SubsectionStyled-aao14i-0 hmgSya">Metadata</h1></a><a href="/docs/extensions/interceptors"><h1 class="Section__SubsectionStyled-aao14i-0 hmgSya">Interceptors</h1></a><div class="Section__SectionStyled-aao14i-1 jpBOok"><h1>API Reference</h1><div class="styles__VerticalCenter-sc-15s5x5k-0 gStFwB"><i class="fa fa-angle-right rotate90"></i></div></div></div><div class="DocsLayout__MarkdownStyles-sc-1wajj7e-1 ekmHSg"><div class="page-body"><h2>Constructor</h2><table><thead><tr><th>Returned from</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>Firecomm.Stub</code></td><td>Object</td><td>The <code>Stub</code> constructor generates an instance of Firecomm&#x27;s <code>Stub</code> class, which extends the native gRPC client-service instance.</td></tr></tbody></table><h1>Getting Started</h1><h2>Install</h2><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code>npm <span style="color:#954121">i</span> --save firecomm</code></pre><h2>1. Define a <code>.proto</code> file</h2><p>Let&#x27;s begin by creating a file named <code>exampleAPI.proto</code> that will live inside a <code>proto</code> folder. The <code>ProtoBuf</code> we define in this file will define the name of the <code>package</code>, the names of the <code>service</code>s, the <code>rpc</code> methods, what the client <code>Stub</code> sends, what the <code>Server</code> returns, and the structured data that is part of each <code>message</code>.</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// proto/exampleAPI.proto</span>
syntax proto3

<span style="color:#954121">package</span> exampleAPI

<span class="hljs-class"><span style="color:#954121">service</span> <span style="color:#458;font-weight:bold">FileTransfer</span> </span>{
  <span class="hljs-function"><span style="color:#954121">rpc</span> ClientToServer (stream File) <span style="color:#954121">returns</span> (Confirmation) {}</span>;
  <span class="hljs-function"><span style="color:#954121">rpc</span> ServerToClient (Confirmation) <span style="color:#954121">returns</span> (stream File) {}</span>;
}

<span class="hljs-class"><span style="color:#954121">service</span> <span style="color:#458;font-weight:bold">HeavyMath</span> </span>{
  <span class="hljs-function"><span style="color:#954121">rpc</span> UnaryMath (Math) <span style="color:#954121">returns</span> (Math) {}</span>;
  <span class="hljs-function"><span style="color:#954121">rpc</span> BidiMath (stream Math) <span style="color:#954121">returns</span> (stream Math) {}</span>;
}

<span class="hljs-class"><span style="color:#954121">message</span> <span style="color:#458;font-weight:bold">Confirmation</span> </span>{
  <span style="color:#0086b3">bool</span> status = <span style="color:#40a070">1</span>;
  <span style="color:#0086b3">string</span> comments = <span style="color:#40a070">2</span>;
}

<span class="hljs-class"><span style="color:#954121">message</span> <span style="color:#458;font-weight:bold">File</span> </span>{
  <span style="color:#0086b3">bytes</span> fileBuffer = <span style="color:#40a070">1</span>;
}

<span class="hljs-class"><span style="color:#954121">message</span> <span style="color:#458;font-weight:bold">Math</span> </span>{
  <span style="color:#0086b3">double</span> num = <span style="color:#40a070">1</span>;
}</code></pre><blockquote><p>Each <code>rpc</code> Method clearly defines request/response, client <code>Stub</code> to <code>Server</code> regardless of call type. For example:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">//    MethodName    Stub/request         Server/response</span>
<span class="hljs-function"><span style="color:#954121">rpc</span> ClientToServer (stream File) <span style="color:#954121">returns</span> (Confirmation) {}</span>;</code></pre></blockquote><h2>2. Let&#x27;s <code>build()</code> a <code>package</code></h2><p>Now that we&#x27;ve defined our API in a ProtoBuf, let&#x27;s pass an absolute path to our <code>.proto</code> file to build a <code>package</code>. We will create a <code>package.js</code> file which will live in our root folder and <code>export</code> a configured <code>package</code> containing the transpiled <code>service</code>s and <code>rpc</code> methods.</p><p>We will also define our configuration for how our packaged methods will handle different data types.</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// package.js</span>
<span style="color:#954121">const</span> { build } = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;firecomm&#x27;</span> );
<span style="color:#954121">const</span> path = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;path&#x27;</span> );
<span style="color:#954121">const</span> PROTO_PATH = path.join( __dirname, <span style="color:#219161">&#x27;./proto/exampleAPI.proto&#x27;</span> );

<span style="color:#954121">const</span> CONFIG_OBJECT = {
  <span class="hljs-attr">keepCase</span>: <span style="color:#954121">true</span>, <span style="color:#408080;font-style:italic">// keeps everything camelCased</span>
  longs: <span style="color:#0086b3">Number</span>, <span style="color:#408080;font-style:italic">// transpiles the enormous `double`s for our HeavyMath into a javascript Number rather than a String</span>
  bytes: <span style="color:#0086b3">String</span>, <span style="color:#408080;font-style:italic">// helps us manage the FileTransfer bytes as javascript `String`s rather than pure hexadecimal Buffers or uint8Arrays</span>
}
<span style="color:#954121">const</span> package = build( PROTO_PATH, CONFIG_OBJECT );
<span style="color:#0086b3">module</span>.exports = package;</code></pre><blockquote><p>Advanced Note: whether you&#x27;re building a firecomm/gRPC-Node <code>Server</code>, a firecomm/gRPC-Node client with <code>Stub</code>s, or a firecomm/gRPC-Node hybrid client/server, it is important to build a package with configurations that match the API for your distributed system. Every server and client should have the same <code>.proto</code> file regardless of language.</p></blockquote><h2>3. Create a server</h2><p>Next, we will create a <code>new Server()</code> inside a <code>server.js</code> file which will live in a <code>server</code> folder. </p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// /server/server.js</span>
<span style="color:#954121">const</span> { Server } = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;firecomm&#x27;</span> );
<span style="color:#954121">const</span> server = <span style="color:#954121">new</span> Server();</code></pre><h2>4. Define the server-side handlers for our <code>FileTransfer</code> service.</h2><p>Let&#x27;s define handler functions for our two <code>FileTransfer</code> <code>rpc</code> methods. Method handler functions will contain the server-side logic for our <code>service</code>s. Let&#x27;s create a <code>fileTransferHandlers.js</code> file which will live inside our <code>server</code> folder.</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// /server/fileTransferHandlers.js</span>
ClientToServerHandler( CALL ) {
  CALL.send({ <span class="hljs-attr">response</span>: value });
};
ServerToClientHandler( CALL ) {
  CALL.on(<span style="color:#219161">&#x27;data&#x27;</span>, request =&gt; someFunctionality(request));
  CALL.send({ <span class="hljs-attr">response</span>: value });
};
<span style="color:#0086b3">module</span>.exports = { 
	ClientToServerHandler,
	ServerToClientHandler,
}</code></pre><h2>5. Define the server-side handlers for our <code>HeavyMath</code> service.</h2><p>Let&#x27;s define handler functions for our two HeavyMath methods. Let&#x27;s continue by defining the handlers for our <code>HeavyMath</code> service in a <code>heavyMathHandlers.js</code> file which will live inside our <code>server</code> folder.</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// /server/heavyMathHandlers.js</span>
UnaryMathHandler( CALL ) {
  CALL.send({ <span class="hljs-attr">response</span>: value });
};
BidiMathHandler( CALL ) {
  CALL.on(<span style="color:#219161">&#x27;data&#x27;</span>, request =&gt; someFunctionality(request));
  CALL.send({ <span class="hljs-attr">response</span>: value });
};
<span style="color:#0086b3">module</span>.exports = { 
	UnaryMathHandler,
	BidiMathHandler,
}</code></pre><h2>6. Add each <code>service</code> from the package to the <code>Server</code></h2><p>Let&#x27;s now return to the <code>server.js</code> file and map each <code>service</code> onto our <code>Server</code>. Mirroring the structure of the <code>.proto</code> file we transpiled, the <code>package</code> object we built has both of the <code>service</code>s on it as properties. We use the <code>Server</code> method <code>.addService</code> to add the <code>services</code> one at a time and map each of the <code>rpc</code> methods to the handlers we wrote.  </p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// /server/server.js</span>
<span style="color:#954121">const</span> { Server } = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;firecomm&#x27;</span> );
<span style="color:#954121">const</span> package = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;../package.js&#x27;</span> );
<span style="color:#954121">const</span> { ClientToServerHandler,
	ServerToClientHandler } = <span style="color:#0086b3">require</span> ( <span style="color:#219161">&#x27;./fileTransferHandlers.js );
const { UnaryMathHandler,
	BidiMathHandler } = require ( &#x27;</span>./heavyMathHandlers.js );

<span style="color:#954121">const</span> server = <span style="color:#954121">new</span> Server();
server.addService( package.FileTransfer,   { 
  <span class="hljs-attr">ClientToServer</span>: ClientToServerHandler,
  <span class="hljs-attr">ServerToClient</span>: ServerToClientHandler,
 });
 server.addService( package.HeavyMath,   { 
  <span class="hljs-attr">UnaryMath</span>: UnaryMathHandler,
  <span class="hljs-attr">BidiMath</span>: BidiMathHandler,
 });</code></pre><blockquote><p>Note: The <code>Server.addService()</code> method also allows the mapping of middleware functions or a middleware stack of functions in the form of an <code>array</code> to be passed in order to influence <code>rpc</code> methods before the handler which should come last in the array. For example: </p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code>server.addService( package.HeavyMath,   &gt; { 
  <span class="hljs-attr">UnaryMath</span>: [ UnaryMathMiddleware, UnaryMathHandler ],
  <span class="hljs-attr">BidiMath</span>: ServerToClientHandler,
}, [ serviceLevelMiddleware1, serviceLevelMiddleware2 ]);</code></pre></blockquote><h2>7. Bind the server to <code>socket</code>(s)</h2><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// /server/server.js</span>
<span style="color:#954121">const</span> { Server } = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;firecomm&#x27;</span> );
<span style="color:#954121">const</span> package = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;../package.js&#x27;</span> );
<span style="color:#954121">const</span> { ClientToServerHandler,
	ServerToClientHandler } = <span style="color:#0086b3">require</span> ( <span style="color:#219161">&#x27;./fileTransferHandlers.js );
const { UnaryMathHandler,
	BidiMathHandler } = require ( &#x27;</span>./heavyMathHandlers.js );

<span style="color:#954121">const</span> server = <span style="color:#954121">new</span> Server();
server.addService( package.FileTransfer,   { 
  <span class="hljs-attr">ClientToServer</span>: ClientToServerHandler,
  <span class="hljs-attr">ServerToClient</span>: ServerToClientHandler,
 });
 server.addService( package.HeavyMath,   { 
  <span class="hljs-attr">UnaryMath</span>: UnaryMathHandler,
  <span class="hljs-attr">BidiMath</span>: BidiMathHandler,
 });
server.bind(<span style="color:#219161">&#x27;0.0.0.0: 3000&#x27;</span>);</code></pre><blockquote><p>Note: <code>Server</code>s can be passed an array of <code>socket</code>s to bind any number of <code>socket</code>s. For example:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code>server.bind( [ 
  <span style="color:#219161">&#x27;0.0.0.0: 3000&#x27;</span>, 
  <span style="color:#219161">&#x27;0.0.0.0: 2999&#x27;</span>, 
] );</code></pre><h2>8. Start the server</h2><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// /server/server.js</span>
<span style="color:#954121">const</span> { Server } = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;firecomm&#x27;</span> );
<span style="color:#954121">const</span> package = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;../package.js&#x27;</span> );
<span style="color:#954121">const</span> { ClientToServerHandler,
	ServerToClientHandler } = <span style="color:#0086b3">require</span> ( <span style="color:#219161">&#x27;./fileTransferHandlers.js );
const { UnaryMathHandler,
	BidiMathHandler } = require ( &#x27;</span>./heavyMathHandlers.js );</code></pre></blockquote><p>const server = new Server();
server.addService( package.FileTransfer,   { 
  ClientToServer: ClientToServerHandler,
  ServerToClient: ServerToClientHandler,
 });
 server.addService( package.HeavyMath,   { 
  UnaryMath: UnaryMathHandler,
  BidiMath: BidiMathHandler,
 });
server.bind( <a href=""> 
  &#x27;0.0.0.0: 3000&#x27;, 
  &#x27;0.0.0.0: 2999&#x27;, 
</a> );
server.start();</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code>&gt; Run your new firecomm/gRPC-Node server <span style="color:#954121">with</span>: `node /server/server.js`. It may also be worthwhile to map this command to `npm start` <span style="color:#954121">in</span> your `package.json`.
## <span style="color:#40a070">9.</span>  Create a `Stub` for the `FileTransfer` service:
Now that the `Server` is fully fleshed out, <span style="color:#954121">let</span><span style="color:#219161">&#x27;s move to the client side by creating a client with `Stub`s for each `rpc` method on `FileTransfer`. Let&#x27;</span>s create a `fileTransferClient.js` file which will live inside our `clients` folder.
```javascript
<span style="color:#408080;font-style:italic">// /clients/fileTransfer.js</span>
const { Stub } = require( <span style="color:#219161">&#x27;firecomm&#x27;</span> );
const package = require( <span style="color:#219161">&#x27;../package.js&#x27;</span> )
const fileTransferStub = new Stub( 
	package.FileTransfer, 
	<span style="color:#219161">&#x27;localhost: 3000&#x27;</span>,
);</code></pre><blockquote><p>In a real gRPC distributed system with firecomm/gRPC-Node clients, each client will most likely exist separately for each <code>service</code> defined in the shared <code>.proto</code> file. However, clients can actually have any number of <code>Stubs</code> running on them on either the same <code>socket</code> or multiple <code>sockets</code>. Additionally, duplicate clients running the same service(s) can be used to allow server level load-balancing.</p><h2>10.  Make <code>ClientToServer</code> and <code>ServerToClient</code> service requests from the <code>Stub</code></h2></blockquote><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// /clients/fileTransfer.js</span>
<span style="color:#954121">const</span> { Stub } = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;firecomm&#x27;</span> );
<span style="color:#954121">const</span> package = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;../package.js&#x27;</span> )
<span style="color:#954121">const</span> fileTransferStub = <span style="color:#954121">new</span> Stub( 
	package.FileTransfer, 
	<span style="color:#219161">&#x27;localhost: 3000&#x27;</span>,
);
<span style="color:#954121">const</span> clientStream = 
  fileTransferStub.ClientToServer( MESSAGE );
  <span style="color:#408080;font-style:italic">// some logic to warrant a streaming response</span>
  clientStream.write( MESSAGE );
<span style="color:#954121">const</span> serverStream = 
  fileTransferStub.ServerToClient( MESSAGE );
  <span style="color:#408080;font-style:italic">// listeners for stream from server</span>
  serverStream.on( <span style="color:#219161">&#x27;data&#x27;</span>, response =&gt; 
  someFunctionality(request));</code></pre><blockquote><p>Run your new firecomm/gRPC-Node client with: <code>node /clients/fileTransfer.js</code>. It may also be worthwhile to map this command to a custom command like <code>npm run transfer</code> in your <code>package.json</code>.</p></blockquote><h2>11.  Create a <code>Stub</code> for the <code>HeavyMath</code> service:</h2><p>Now that the <code>Server</code> and <code>FileTransfer</code> Stub are fully fleshed out, let&#x27;s create another <code>Stub</code> with access to each <code>rpc</code> method on <code>HeavyMath</code>. We&#x27;ll create a <code>heavyMath.js</code> file which will live inside our <code>clients</code> folder.</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// /clients/heavyMath.js</span>
<span style="color:#954121">const</span> { Stub } = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;firecomm&#x27;</span> );
<span style="color:#954121">const</span> package = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;../package.js&#x27;</span> )
<span style="color:#954121">const</span> heavyMathStub = <span style="color:#954121">new</span> Stub( 
	package.HeavyMath, 
	<span style="color:#219161">&#x27;localhost: 2999&#x27;</span>,
);</code></pre><blockquote><p>Note: two different clients <em>can</em> share a single socket on the server, in which case all concurrent requests and responses will be multiplexed. However, in a real gRPC distributed system, this is unlikely for two different services to share a socket.</p></blockquote><h2>12. Make <code>UnaryMath</code> and <code>BidiMath</code> service requests from the <code>Stub</code></h2><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// /clients/heavyMath.js</span>
<span style="color:#954121">const</span> { Stub } = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;firecomm&#x27;</span> );
<span style="color:#954121">const</span> package = <span style="color:#0086b3">require</span>( <span style="color:#219161">&#x27;../package.js&#x27;</span> )
<span style="color:#954121">const</span> heavyMathStub = <span style="color:#954121">new</span> Stub( 
	package.HeavyMath, 
	<span style="color:#219161">&#x27;localhost: 2999&#x27;</span>,
);
heavyMathStub.UnaryMath( MESSAGE );
  <span style="color:#408080;font-style:italic">// some logic to warrant a streaming response</span>
  clientStream.write( MESSAGE );
<span style="color:#954121">const</span> bidiStream = 
  heavyMathStub.BidiMath( MESSAGE );
  <span style="color:#408080;font-style:italic">// listeners for stream from server</span>
  serverStream.on( <span style="color:#219161">&#x27;data&#x27;</span>, response =&gt; 
  someFunctionality(request));</code></pre><blockquote><p>Run your new firecomm/gRPC-Node client with: <code>node /clients/heavyMath.js</code>. It may also be worthwhile to map this command to a custom command like <code>npm run math</code> in your <code>package.json</code>.</p></blockquote></div></div></div><section class="Footer__FooterStyles-sc-1aztnwy-2 kVBzNx"><div class="Footer__FooterSection-sc-1aztnwy-0 QhKwy"><h5><strong>Docs</strong></h5><h5><a href="/docs">Getting Started</a></h5><h5><a href="/docs">Other</a></h5><h5><a href="/docs">Other</a></h5></div><div class="Footer__FooterSection-sc-1aztnwy-0 QhKwy"><h5><strong>Guides</strong></h5><h5><a href="/docs">Getting Started</a></h5></div><div class="Footer__FooterSection-sc-1aztnwy-0 QhKwy"><h5><strong>More</strong></h5><h5><a href="https://github.com/oslabs-beta/firecomm">Github</a></h5></div><section class="Footer__Bumper-sc-1aztnwy-1 gvDWNs">Copyright (c) 2019-present Ian Geckeler, Daniel Nagano-Gerace, Giuseppe Valentino, and Dmitriy Levy. Icons credit to Font Awesome and the Noun Project.</section></section></div><script id="__NEXT_DATA__" type="application/json">{"dataManager":"[]","props":{"pageProps":{}},"page":"/docs/gettingstarted/intro","query":{},"buildId":"1ULOyhpdE60Kv59GvR_OI","dynamicBuildId":false,"nextExport":true}</script><script async="" id="__NEXT_PAGE__/docs/gettingstarted/intro" src="/_next/static/1ULOyhpdE60Kv59GvR_OI/pages/docs/gettingstarted/intro.js"></script><script async="" id="__NEXT_PAGE__/_app" src="/_next/static/1ULOyhpdE60Kv59GvR_OI/pages/_app.js"></script><script src="/_next/static/runtime/webpack-f5e50b6b501ccea2a79b.js" async=""></script><script src="/_next/static/chunks/commons.dd6c635d8eadfd49a780.js" async=""></script><script src="/_next/static/runtime/main-a3e70f2f58612dbba4b9.js" async=""></script></body></html>